<!DOCTYPE html>
<html>
<head>
    <title>Crear Servicio</title>
</head>
<body>
<h2>Crear Servicio</h2>
<form id="serviceForm">
    <input type="text" name="name" placeholder="Nombre servicio" required><br>
    <textarea name="description" placeholder="Descripción"></textarea><br>
    <input type="number" step="0.01" name="price" placeholder="Precio" required><br>
    <input type="number" name="category_id" placeholder="ID Categoría" required><br>
    <button type="submit">Crear</button>
</form>

<div id="message"></div>

<script>
const form = document.getElementById('serviceForm');
form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const token = localStorage.getItem('token'); // Suponiendo login ya guarda token
    const formData = Object.fromEntries(new FormData(form).entries());

    try {
        const res = await fetch('/api/services', {
            method: 'POST',
            headers: { 
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
            },
            body: JSON.stringify(formData)
        });

        const json = await res.json();
        document.getElementById('message').innerText = json.message;
        console.log(json.service);

    } catch (err) {
        document.getElementById('message').innerText = 'Error al crear servicio';
        console.error(err);
    }
});
</script>
</body>
</html>